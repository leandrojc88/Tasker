(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fbdd546","chunk-62038c1d","chunk-2d20fa88"],{"46c3":function(t,e,a){"use strict";var s=a("b745"),n=a.n(s);n.a},a8a7:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{"min-width":"450",width:"500",height:"570"}},[a("v-toolbar",{attrs:{dense:"","max-height":"48",fixed:"","primary-title":"",flat:""}},[a("v-toolbar-title",[a("v-icon",{attrs:{left:""}},[t._v("mdi-format-list-bulleted")]),t._v("Administración del ProGraf ")],1),a("v-spacer"),a("v-btn",{staticClass:"mr-0",attrs:{icon:"",small:""},on:{click:function(e){return t.$emit("close")}}},[a("v-icon",[t._v("$close")])],1)],1),a("v-card-text",{staticClass:"pt-3 px-3",attrs:{dense:""}},[a("v-tabs",{attrs:{"background-color":"transparent",grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",{attrs:{dark:"","slider-color":"primary"}},[a("v-icon",{attrs:{left:""}},[t._v("$checks")]),a("span",[t._v("Sub Tareas")])],1),a("v-tab",{attrs:{dark:"","slider-color":"primary"}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-image")]),a("span",[t._v("Imagen")])],1),a("v-tab",{attrs:{dark:"","slider-color":"primary"}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-calendar-clock")]),a("span",[t._v("Tiempo")])],1)],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("div",{staticClass:"mt-3 title d-flex",attrs:{color:"transparent",dense:"",flat:""}},[a("v-icon",{attrs:{left:""}},[t._v("$checks")]),a("span",[t._v("Sub Tareas")]),a("v-spacer"),a("span",[t._v(t._s(t.doneTo))])],1),a("v-progress-linear",{staticClass:"my-1",attrs:{value:t.percentage}}),a("p",{staticClass:"text-end subtitle-2"},[t._v(t._s(t.percentage)+"%")]),a("v-sheet",{staticClass:"mt-4"},t._l(t.list_subtasks,(function(e,s){return a("sub-task",{key:s,attrs:{id:e.id,name:e.name,done:e.done},on:{delete:t.deleteSubtask,changedone:t.changeDone}})})),1),t.create__subtask?a("manage-sub-task",{attrs:{idtask:t.taskId__selected},on:{createsubtask:t.createSubTask,"on-close":function(e){t.create__subtask=!1}}}):t._e(),a("v-btn",{staticClass:"mt-2",attrs:{text:"",small:""},on:{click:function(e){t.create__subtask=!0}}},[a("v-icon",{attrs:{size:"16",left:""}},[t._v("$add_circle")]),a("span",{staticClass:"text-capitalize caption"},[t._v("Nueva Sub Tarea...")])],1)],1),a("v-tab-item",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.hover;return[a("v-img",{staticClass:"mx-auto my-3",attrs:{contain:"",height:"300",width:"95%",src:t.src}},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:s&&t.src,expression:"hover && src"}],staticClass:"ml-2 mt-2",attrs:{fab:"","x-small":"",color:"error"},on:{click:t.deleteImg}},[a("v-icon",[t._v("$delete")])],1)],1)]}}])}),a("v-form",{staticClass:"px-8"},[a("v-file-input",{attrs:{dense:"","show-size":"",outlined:"","hide-details":"",filled:"",clearable:"",accept:"image/png, image/jpeg, image/bmp",placeholder:"Seleccione la Imagen"},model:{value:t.fileupload,callback:function(e){t.fileupload=e},expression:"fileupload"}}),a("v-btn",{staticClass:"mt-2",attrs:{block:"",color:"success",disabled:!t.fileupload},on:{click:t.submit}},[a("v-icon",{attrs:{size:"20",left:""}},[t._v("mdi-image-edit-outline")]),t._v("Guardar ")],1)],1)],1),a("v-tab-item",[a("div",{staticClass:"d-flex align-center mt-3"},[a("v-spacer"),a("v-btn",{staticClass:"mb-1",attrs:{color:"error",outlined:"",small:""}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-calendar-remove-outline")]),t._v("Sin Tiempo ")],1)],1),a("v-sheet",{staticClass:"d-flex px-2 justify-space-between my-3"},[a("span",{staticClass:"headline"},[t._v(t._s(t.date_show))]),a("span",{staticClass:"headline"},[t._v(t._s(t.count_days)+" días")])]),a("div",{staticClass:"d-flex justify-center"},[a("v-date-picker",{staticClass:"mr-2",attrs:{locale:"es-es","no-title":"",color:"primary","full-width":"",min:(new Date).toISOString().substr(0,10),"first-day-of-week":"1"},model:{value:t.picker,callback:function(e){t.picker=e},expression:"picker"}},[a("v-spacer"),a("v-btn",{attrs:{color:"success",block:"",disabled:!1}},[a("v-icon",{attrs:{left:"",size:"18"}},[t._v("mdi-check")]),t._v("Asignar fecha ")],1)],1)],1)],1),a("v-bottom-sheet",{model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("v-sheet",{staticClass:"text-center",attrs:{height:"200px"}},[a("v-btn",{staticClass:"ma-3 mt-6",attrs:{outlined:""},on:{click:function(e){t.confirm=!1}}},[t._v("Cancelar")]),a("v-btn",{staticClass:"ma-3 mt-6",attrs:{dark:"",color:"error"},on:{click:t.confirmDelete}},[t._v("Confirmar")]),a("div",{staticClass:"py-3"},[t._v("Seguro que desea eliminar la sub tarea?")])],1)],1)],1)],1)],1)},n=[],r=(a("99af"),a("4de4"),a("7db0"),a("c740"),a("a434"),a("96cf"),a("1da1")),i=a("5530"),c=a("be8d"),o=a("b521"),l=a("2f62"),u={components:{SubTask:c["default"],ManageSubTask:o["default"]},data:function(){return{is_done:!1,confirm:!1,show_selector_img:!1,create__subtask:!1,src:"",tab:null,fileupload:null,list_subtasks:[],delete_subtask:null,picker:"2020-07-08"}},mounted:function(){this.loadDatas()},watch:{taskId__selected:function(t){this.loadDatas()}},computed:Object(i["a"])({},Object(l["e"])("app",["taskId__selected","images"]),{percentage:function(){var t=this.list_subtasks.filter((function(t){return!0===t.done})),e=100*t.length/this.list_subtasks.length;return e?Math.round(e):0},doneTo:function(){var t=this.list_subtasks.filter((function(t){return!0===t.done}));return this.setTaskCountSubtaskTo({done_subtask:t.length,subtasks:this.list_subtasks.length}),"".concat(t.length,"/").concat(this.list_subtasks.length)},count_days:function(){new Date(this.picker)},date_show:function(){return console.log(this.picker),new Date(this.picker+" 10:00:00").toLocaleDateString("es-es",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}}),methods:Object(i["a"])({},Object(l["d"])(["showNotify"]),{},Object(l["d"])("app",["setTaskCountSubtaskTo","deleteImages"]),{},Object(l["b"])("app",["saveImage"]),{submit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("file",t.fileupload),e.next=4,t.axios.post("/task/upload_img/".concat(t.taskId__selected),a);case 4:s=e.sent,t.src=s.data,t.saveImage({id:t.taskId__selected,img:s.data}),t.fileupload=null;case 8:case"end":return e.stop()}}),e)})))()},loadDatas:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.src="",t.fileupload=null,-1==t.taskId__selected){e.next=17;break}if(a=t.images.find((function(e){return e.id===t.taskId__selected})),!a){e.next=8;break}t.src=a.img,e.next=13;break;case 8:return e.next=10,t.axios.get("/task/load_img/"+t.taskId__selected);case 10:s=e.sent,t.src=s.data||"",s.data&&t.saveImage({id:t.taskId__selected,img:s.data});case 13:return e.next=15,t.axios.get("/subtask/".concat(t.taskId__selected));case 15:n=e.sent,t.list_subtasks=n.data;case 17:case"end":return e.stop()}}),e)})))()},deleteImg:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.delete("/task/img/".concat(t.taskId__selected));case 3:t.src="",t.deleteImages({id:t.taskId__selected}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.showNotify({msg:"Error al eliminar Imagen",color:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},createSubTask:function(t){this.list_subtasks.push(t),this.create__subtask=!1},deleteSubtask:function(t){this.delete_subtask=t,this.confirm=!0},changeDone:function(t){var e=this.list_subtasks.findIndex((function(e){return e.id===t.id}));this.list_subtasks[e].done=t.value},confirmDelete:function(){var t=this;try{this.axios.delete("/subtask/".concat(this.delete_subtask));var e=this.list_subtasks.findIndex((function(e){return e.id===t.delete_subtask}));this.list_subtasks.splice(e,1),this.showNotify({msg:"Eliminada correctamente"})}catch(a){this.showNotify({msg:"no se pudo eliminar correctamente"+a,color:"error"})}this.confirm=!1}})},d=u,m=a("2877"),b=Object(m["a"])(d,s,n,!1,null,null,null);e["default"]=b.exports},b521:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"my-2 pr-1 align-center"},[a("v-textarea",{ref:"namesubtask",staticClass:"pa-1 pb-0",attrs:{autofocus:"",placeholder:"Nueva sub tarea","auto-grow":"",outlined:"",rows:"1","row-height":"15",rules:[t.rules.require],dense:""},model:{value:t.dname,callback:function(e){t.dname=e},expression:"dname"}}),a("v-card-actions",{staticClass:"pt-0"},[a("v-btn",{attrs:{small:"",icon:""},on:{click:t.eventClose}},[a("v-icon",[t._v("$close")])],1),a("v-spacer"),t.edit?a("v-btn",{attrs:{"x-small":"",color:"warning"},on:{click:t.saveSubTask}},[t._v("Guardar")]):a("v-btn",{attrs:{"x-small":"",color:"primary"},on:{click:t.createSubTask}},[t._v("Crear")])],1)],1)},n=[],r=(a("b0c0"),a("a9e3"),a("96cf"),a("1da1")),i=a("5530"),c=a("2f62"),o={props:{idtask:Number,edit:Boolean,name:String,idsubtask:Number},data:function(){return{dname:"",rules:{require:function(t){return!!t||"Campo obligatorio"}}}},beforeMount:function(){this.dname=this.name},methods:Object(i["a"])({},Object(c["d"])(["showNotify"]),{createSubTask:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$refs.namesubtask.validate()){e.next=12;break}return e.prev=1,e.next=4,t.axios.post("/subtask",{name:t.dname,taskId:t.idtask});case 4:a=e.sent,t.$emit("createsubtask",a.data),t.showNotify({msg:"sub tarea creada satisfactoriamente"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),t.showNotify({msg:"Error Nueva sub tarea : ".concat(e.t0),color:"error"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},saveSubTask:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$refs.namesubtask.validate()){e.next=17;break}return e.prev=1,a={name:t.dname,taskId:t.idtask},e.next=5,t.axios.put("/subtask/".concat(t.idsubtask),a);case 5:if(s=e.sent,!s.data){e.next=11;break}t.$emit("editsubtask",Object(i["a"])({id:t.idsubtask},a)),t.showNotify({msg:"sub tarea editada satisfactoriamente"}),e.next=12;break;case 11:throw new Error("Error al editar sub tarea");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](1),t.showNotify({msg:"Error editar tarea : ".concat(e.t0),color:"error"});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))()},eventClose:function(){this.$emit("on-close")}})},l=o,u=a("2877"),d=Object(u["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},b745:function(t,e,a){},be8d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.hover;return[t.edit?a("manage-sub-task",{attrs:{edit:"",idsubtask:t.id,name:t.dname},on:{editsubtask:t.editSubTask,"on-close":function(e){t.edit=!1}}}):a("v-sheet",{staticClass:"d-flex",attrs:{"min-height":"30"}},[a("v-checkbox",{staticClass:"ma-0 mt-1 pa-0",attrs:{"hide-details":"",height:"10"},on:{change:t.changeDone},model:{value:t.ddone,callback:function(e){t.ddone=e},expression:"ddone"}}),a("span",{class:{hover:s},on:{dblclick:function(e){t.edit=!0}}},[t._v(t._s(t.dname))]),a("v-spacer"),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:s,expression:"hover"}],attrs:{small:"",color:"error",icon:""},on:{click:function(e){return t.deleteSubtask()}}},[a("v-icon",[t._v("$delete")])],1)],1)]}}])})},n=[],r=(a("b0c0"),a("a9e3"),a("b521")),i={components:{ManageSubTask:r["default"]},props:{id:Number,name:String,done:Boolean},data:function(){return{edit:!1,dname:"",ddone:!1}},watch:{name:function(t){this.loadData()}},beforeMount:function(){this.loadData()},methods:{editSubTask:function(t){this.dname=t.name,this.edit=!1},deleteSubtask:function(){this.$emit("delete",this.id)},changeDone:function(t){try{this.axios.put("/subtask/changedone/".concat(this.id),{done:t}),this.$emit("changedone",{id:this.id,value:t})}catch(e){alert(e)}},loadData:function(){this.dname=this.name,this.ddone=this.done}}},c=i,o=(a("46c3"),a("2877")),l=Object(o["a"])(c,s,n,!1,null,"128b47e6",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-4fbdd546.3b3d2291.js.map