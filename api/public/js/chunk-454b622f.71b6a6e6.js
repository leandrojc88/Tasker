(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-454b622f","chunk-dbc441f6","chunk-12156a3c","chunk-59f96eaa"],{"1b3b":function(e,t,s){},"1d37":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{fluid:""}},[s("v-card",[s("v-tabs",{attrs:{vertical:""}},[e._l(e.roles,(function(t,a){return s("v-tab",{key:a,staticStyle:{"justify-content":"left"},on:{click:function(s){e.rol_name_selected=t.name}},model:{value:e.rol_name_selected,callback:function(t){e.rol_name_selected=t},expression:"rol_name_selected"}},[s("v-icon",{attrs:{left:""}},[e._v("mdi-account-multiple-outline")]),e._v(" "+e._s(t.name)+" ")],1)})),e._l(e.roles,(function(t,a){return s("v-tab-item",{key:a},[s("v-container",[s("v-toolbar",{attrs:{flat:"",color:"white"}},[s("v-toolbar-title",[e._v("Módulos")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-chip-group",{staticClass:"ma-0",attrs:{mandatory:"","active-class":"primary--text elevation-2"},model:{value:e.selection_module_first,callback:function(t){e.selection_module_first=t},expression:"selection_module_first"}},e._l(e.listModulesRolAccess,(function(t,a){return s("v-chip",{key:a,staticClass:"ma-1",attrs:{outlined:""},on:{click:function(s){return e.moduleSelected(t.descrip)}}},[e._v(e._s(t.descrip))])})),1)],1),"no"!==e.module_name_selected?[s("v-list",{staticClass:"pt-0 pl-2",attrs:{dense:""}},[s("v-subheader",{staticClass:"subtitle-2"},[e._v("PERMISOS:")]),"all"===e.permisions?[s("h2",{staticClass:"ml-3"},[e._v("Todos los Permisos")])]:e._l(e.permisions,(function(t,a){return[s("v-divider",{key:"divider"+a}),s("v-list-item",{key:"list"+a},[s("v-list-item-content",[t.not?s("v-list-item-title",[s("v-icon",{attrs:{color:"#FF5252",size:"20"}},[e._v("mdi-music-accidental-double-sharp")]),s("span",{staticClass:"notRoles"},[e._v(e._s(t.descrip))]),s("v-spacer")],1):s("v-list-item-title",[s("v-icon",{attrs:{small:""}},[e._v("mdi-menu-right-outline")]),e._v(" "+e._s(t.descrip)+" ")],1)],1),t.permisions.length>0?s("v-list-item-action",{staticClass:"flex-row"},e._l(t.permisions,(function(t,a){return s("v-chip",{key:a,staticClass:"ml-1",class:e.classColors(t),attrs:{small:""}},[e._v(e._s(e.traslate(t)))])})),1):e._e()],1)]}))],2)]:e._e()],2)],1)}))],2)],1)],1)},r=[],i=(s("99af"),s("7db0"),s("45fc"),s("b0c0"),s("ee8a")),n=s("7963"),o={name:"Rols",data:function(){return{roles:i["c"],rol_name_selected:"",module_name_selected:"",selection_module_first:0}},watch:{rol_name_selected:function(e){this.listModulesRolAccess,this.selection_module_first=0,this.module_name_selected=this.listModulesRolAccess.length&&this.listModulesRolAccess[0].descrip}},computed:{listModulesRolAccess:function(){return Object(n["c"])(this.rol_name_selected)},permisions:function(){return this.module_name_selected?Object(n["b"])(this.rol_name_selected,this.module_name_selected):[]}},methods:{moduleSelected:function(e){this.module_name_selected=e},classColors:function(e){var t=["crud","create","read","update","delete"];return{primary:"manage"===e||!1,secondary:t.some((function(t){return e===t}))||!1,success:!["manage","sin permisos"].concat(t).some((function(t){return e===t}))||!1,error:"sin permisos"===e||!1}},traslate:function(e){var t=[["manage","Todos"],["crud","crud"],["create","crear"],["read","leer"],["update","actualizar"],["delete","borrar"]],s=t.find((function(t){return t[0]===e}));return s&&s[1]||e}},created:function(){this.rol_name_selected=this.roles[0].name,this.module_name_selected=this.roles[0].default}},l=o,c=(s("8b16"),s("2877")),u=Object(c["a"])(l,a,r,!1,null,null,null);t["default"]=u.exports},2397:function(e,t,s){},"27de":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticClass:"overflow-hidden",staticStyle:{position:"relative","min-height":"80vh"},attrs:{fluid:""}},[s("v-row",[s("v-col",[s("v-sheet",{staticClass:"d-flex"},[s("v-btn",{attrs:{small:"",color:"primary",outlined:""},on:{click:e.changeOrder}},[s("v-icon",{attrs:{left:""}},[e._v(e._s(e.icon_order))]),e._v("Ordenar ")],1),s("v-btn",{staticClass:"ml-1",attrs:{small:"",color:"primary",outlined:""},on:{click:function(t){return e.expandAll()}}},[s("v-icon",{attrs:{left:""}},[e._v("mdi-arrow-expand-all")]),e._v("Expandir ")],1),s("v-btn",{staticClass:"ml-1",attrs:{small:"",color:"primary",outlined:""},on:{click:function(t){e.expands=[]}}},[s("v-icon",{attrs:{left:""}},[e._v("mdi-arrow-collapse-all")]),e._v("Contraer ")],1),s("v-spacer"),s("v-badge",{attrs:{value:e.has_filters,color:"red","offset-x":"11","offset-y":"11",overlap:"",dot:""}},[s("v-btn",{attrs:{small:"",color:"primary",outlined:""},on:{click:function(t){return e.showFilters()}}},[s("v-icon",{attrs:{left:""}},[e._v("mdi-filter-outline")]),e._v("Filtros ")],1)],1),s("v-btn",{staticClass:"ml-1",attrs:{small:"",color:"primary"},on:{click:function(t){return e.init()}}},[s("v-icon",{attrs:{left:""}},[e._v("mdi-find-replace")]),e._v("Actualizar ")],1)],1),s("v-divider",{staticClass:"my-2"})],1)],1),s("v-row",[s("v-col",[e.count_histry?e._e():s("v-alert",{attrs:{type:"warning",dense:"",border:"left"}},[e._v("No hay datos para mostrar ... !")]),s("v-timeline",{attrs:{dense:""}},e._l(e.list_history,(function(t,a){return s("v-timeline-item",{key:a,staticClass:"pb-1",attrs:{color:e.getColorByAction(t.action),"fill-dot":"",icon:e.getIconByAction(t.action),"icon-color":"black",small:""}},[s("v-card",[s("v-card-title",{staticClass:"py-2 pl-1 pr-2 d-flex body-2 justify-space-between mouse-hove",on:{click:function(t){return e.expandAndContract(a)}}},[s("div",[s("v-icon",[e._v("mdi-music-accidental-sharp")]),e._v(" "+e._s(t["id"])+" "),s("v-icon",{staticClass:"pl-5",attrs:{title:"Tabla"}},[e._v("mdi-table")]),e._v(" "+e._s(t.table)+" ")],1),s("div",[s("v-icon",{attrs:{title:"Usuario"}},[e._v("mdi-account-outline")]),e._v(" "+e._s(t.user.user)+" ")],1),s("div",[s("v-icon",{attrs:{title:"Fecha"}},[e._v("mdi-clock-outline")]),e._v(" "+e._s(new Date(t.moment).toLocaleString("en-gb",{timeZone:"UTC",hour12:!0}))+" ")],1)]),s("v-expand-transition",[e.expands.some((function(e){return e===a}))?s("div",[s("v-divider"),"Update"!=t.action?s("v-card-text",[[s("v-data-table",{staticClass:"elevation-1",attrs:{"elevation-5":"",dense:"",headers:e.headers,items:e.action_doby(t.data),"item-key":"name","hide-default-footer":""}})]],2):s("v-card-text",[[s("v-data-table",{staticClass:"elevation-1",attrs:{"elevation-5":"",dense:"",headers:e.headersUpdate,items:e.action_dobyUpdate(t.data),"item-key":"name","hide-default-footer":""}})]],2)],1):e._e()])],1)],1)})),1)],1)],1),s("v-row",[s("v-pagination",{attrs:{page:"current_page","total-visible":"10",length:e.length,circle:""},model:{value:e.current_page,callback:function(t){e.current_page=t},expression:"current_page"}})],1),s("v-navigation-drawer",{attrs:{height:"85vh",width:"370",absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[s("v-card",{staticClass:"d-flex flex-column",attrs:{height:"100%"}},[s("v-card-title",{staticClass:"pa-0",attrs:{"primary-title":""}},[s("v-app-bar",{attrs:{color:"grey lighten-3",dense:""}},[s("v-icon",{attrs:{left:""}},[e._v("mdi-filter-outline")]),s("v-card-title",{staticClass:"px-2",attrs:{"primary-title":""}},[e._v("Filtros")]),s("v-spacer"),s("v-btn",{attrs:{text:"",small:"",color:"error",outlined:""},on:{click:function(t){return e.clearAllFilters()}}},[s("v-icon",[e._v("mdi-broom")]),e._v("Limpiar ")],1)],1)],1),s("v-card-text",{staticClass:"px-1",attrs:{"primary-title":""}},[s("v-form",{ref:"form"},[s("v-combobox",{attrs:{items:e.list_actions,"item-text":"es",label:"Acciones",multiple:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[s("v-chip",e._b({key:JSON.stringify(t.item),staticClass:"px-2",attrs:{outlined:"","input-value":t.selected,disabled:t.disabled},on:{"click:close":function(e){return t.parent.selectItem(t.item)}}},"v-chip",t.attrs,!1),[s("v-avatar",{attrs:{color:t.item.color,left:""}},[s("v-icon",{attrs:{size:"16",color:"black"}},[e._v(e._s(t.item.icon))])],1),e._v(" "+e._s(t.item.es)+" ")],1)]}}]),model:{value:e.filter_action,callback:function(t){e.filter_action=t},expression:"filter_action"}}),s("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.date_piker,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){e.date_piker=t},"update:return-value":function(t){e.date_piker=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-text-field",e._g({attrs:{value:e.seeDates,label:"Rango de Fecha",readonly:""}},a))]}}]),model:{value:e.date_piker,callback:function(t){e.date_piker=t},expression:"date_piker"}},[s("v-date-picker",{attrs:{range:"",locale:"es-es"},model:{value:e.filter_dates,callback:function(t){e.filter_dates=t},expression:"filter_dates"}},[s("v-btn",{attrs:{small:"",text:"",color:"error",outlined:""},on:{click:function(t){return e.clearDate()}}},[s("v-icon",[e._v("mdi-broom")]),e._v("Limpiar ")],1),s("v-btn",{attrs:{small:"",text:""},on:{click:function(t){e.date_piker=!1}}},[e._v("Cancelar")]),s("v-btn",{attrs:{small:"",text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.date_piker)}}},[e._v("OK")])],1)],1),s("v-select",{attrs:{items:e.list__users,"item-text":"user","item-value":"id",label:"Usuario","menu-props":{overflowY:!0,"offset-y":!0},clearable:""},model:{value:e.filter_user,callback:function(t){e.filter_user=t},expression:"filter_user"}}),s("v-select",{attrs:{clearable:"","menu-props":{overflowY:!0,"offset-y":!0},label:"Tablas",items:e.list_tables,"item-text":"table"},model:{value:e.filter_table,callback:function(t){e.filter_table=t},expression:"filter_table"}})],1)],1),s("v-spacer")],1)],1)],1)},r=[],i=(s("99af"),s("7db0"),s("c975"),s("a15b"),s("d81d"),s("45fc"),s("a434"),s("b0c0"),s("4fad"),s("96cf"),s("1da1")),n=s("53ca"),o=s("5530"),l=(s("b354"),s("2f62")),c={name:"Logs",data:function(){return{order:"desc",list_history:[],list_tables:[],expands:[],filter_dates:[],drawer:!1,cant_to_show:30,current_page:1,count_histry:0,date_piker:!1,filter_action:[],filter_user:"",filter_table:"",dont_show:["createdAt","deletedAt","updatedAt"],headers:[{text:"Campo",value:"campo",sortable:!1,class:"blue"},{text:"Valor",value:"valor",sortable:!1,class:"blue"}],headersUpdate:[{text:"Campo",value:"campo",sortable:!1,class:"blue"},{text:"Valor",value:"valor",sortable:!1,class:"blue"},{text:"Nuevo Valor",value:"valor_updated",sortable:!1,class:"blue"}],list_actions:[{name:"Insert",es:"Adicionar",color:"success",icon:"mdi-plus-thick"},{name:"Update",es:"Actualizar",color:"warning",icon:"mdi-pencil"},{name:"Delete",es:"Eliminar",color:"error",icon:"mdi-delete"}]}},watch:{current_page:function(e){this.getDataPaginated()}},computed:Object(o["a"])({},Object(l["e"])("admin",["list__users"]),{icon_order:function(){return"desc"===this.order?"mdi-sort-descending":"mdi-sort-ascending"},length:function(){return Math.ceil(this.count_histry/this.cant_to_show)},seeDates:function(){return this.filter_dates.join(" al ")},has_filters:function(){return!!this.filter_action.length||(!!this.filter_dates.length||(!!this.filter_user||!!this.filter_table))},filters:function(){var e={};return e.actions=this.filter_action.length?this.filter_action.map((function(e){return e.name})):[],1===this.filter_dates.length&&this.filter_dates.push(this.filter_dates[0]),e.dates=this.filter_dates.length?this.filter_dates:[],e.user=this.filter_user,e.table=this.filter_table,e}}),mounted:function(){this.init()},methods:{changeOrder:function(){this.order="desc"===this.order?"asc":"desc",this.init()},getColorByAction:function(e){return this.list_actions.find((function(t){return t.name===e})).color},getIconByAction:function(e){return this.list_actions.find((function(t){return t.name===e})).icon},action_doby:function(e){var t=this,s=[];return Object.entries(e).map((function(e){t.dont_show.some((function(t){return t===e[0]}))||s.push({campo:e[0],valor:"object"===Object(n["a"])(e[1])?JSON.stringify(e[1]):e[1]})})),s},action_dobyUpdate:function(e){var t=this,s=[];return Object.entries(e.toChangeData).map((function(e){t.dont_show.some((function(t){return t===e[0]}))||s.push({campo:e[0],valor:"object"===Object(n["a"])(e[1])?JSON.stringify(e[1]):e[1]})})),s.map((function(t){t.valor_updated=e.changeData.hasOwnProperty(t.campo)?e.changeData[t.campo]:""})),s},expandAndContract:function(e){if(this.expands.some((function(t){return t===e}))){var t=this.expands.indexOf(e);this.expands.splice(t,1)}else this.expands.push(e)},getDataPaginated:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.cant_to_show*(e.current_page-1),t.next=3,e.axios.get("/historySystem/".concat(s,"/").concat(e.cant_to_show,"/").concat(e.order,"/").concat(JSON.stringify(e.filters)));case 3:a=t.sent,e.list_history=a.data;case 5:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.current_page=1,e.getDataPaginated(),t.next=4,e.axios.get("/historySystem/count/".concat(JSON.stringify(e.filters)));case 4:s=t.sent,e.count_histry=s.data;case 6:case"end":return t.stop()}}),t)})))()},expandAll:function(){for(var e=0;e<this.cant_to_show;e++)this.expands.push(e)},clearDate:function(){this.filter_dates=[],this.date_piker=!1},clearAllFilters:function(){this.$refs.form.reset(),this.filter_dates=[]},showFilters:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.drawer=!e.drawer,t.next=3,e.axios.get("/historySystemTables");case 3:s=t.sent,e.list_tables=s.data;case 5:case"end":return t.stop()}}),t)})))()}}},u=c,d=(s("a98c"),s("2877")),m=Object(d["a"])(u,a,r,!1,null,null,null);t["default"]=m.exports},"77f1":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-tabs",{staticStyle:{"min-height":"84vh"},attrs:{centered:"","background-color":"primary",dark:""}},[s("v-tab",[e._v("Usuarios")]),s("v-tab",[e._v("Roles y Permisos")]),s("v-tab",[e._v("Historial")]),s("v-tab-item",{attrs:{tabindex:""}},[s("Users")],1),s("v-tab-item",{attrs:{tabindex:""}},[s("Rols")],1),s("v-tab-item",{attrs:{tabindex:""}},[s("Logs")],1)],1)},r=[],i=s("cec7"),n=s("1d37"),o=s("27de"),l={name:"Dashboard",components:{Users:i["default"],Rols:n["default"],Logs:o["default"]},data:function(){return{}}},c=l,u=s("2877"),d=Object(u["a"])(c,a,r,!1,null,null,null);t["default"]=d.exports},"8b16":function(e,t,s){"use strict";var a=s("2397"),r=s.n(a);r.a},a98c:function(e,t,s){"use strict";var a=s("1b3b"),r=s.n(a);r.a},c975:function(e,t,s){"use strict";var a=s("23e7"),r=s("4d64").indexOf,i=s("a640"),n=s("ae40"),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0,c=i("indexOf"),u=n("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(e){return l?o.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},cec7:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{fluid:""}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.lista_usuarios,search:e.search,"sort-by":"id"},scopedSlots:e._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:"",color:"white"}},[s("v-toolbar-title",{staticClass:"hidden-xs-only"},[e._v("Usuarios:")]),s("v-divider",{staticClass:"hidden-xs-only mx-4",attrs:{inset:"",vertical:""}}),s("v-text-field",{attrs:{"prepend-icon":"mdi-account-search-outline",label:"Buscar","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"500px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:e.openAddModal}},a),[s("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-account-plus-outline")]),s("span",{staticClass:"hidden-xs-only"},[e._v("Nuevo")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card",[s("v-card-title",{staticClass:"blue darken-4",staticStyle:{color:"white"}},[e._v(e._s(e.formTitle))]),s("v-card-text",{staticClass:"py-1"},[s("v-container",{staticClass:"py-1"},[s("v-form",{ref:"form",attrs:{"lazy-validation":""}},[s("v-row",[s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-text-field",{attrs:{required:"",rules:[e.rules.required,e.rules.user_string,e.rules.user_exist],label:"Usuario"},model:{value:e.indexUser.user,callback:function(t){e.$set(e.indexUser,"user",t)},expression:"indexUser.user"}})],1),s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-text-field",{attrs:{rules:[e.rules.required],label:"Nombre Completo"},model:{value:e.indexUser.full_name,callback:function(t){e.$set(e.indexUser,"full_name",t)},expression:"indexUser.full_name"}})],1),s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-select",{attrs:{items:e.rol_list,"item-text":"name","item-value":"id",rules:[e.rules.required],label:"Seleccione el Rol"},model:{value:e.indexUser.rol,callback:function(t){e.$set(e.indexUser,"rol",t)},expression:"indexUser.rol"}})],1),s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-select",{attrs:{items:e.list__cargos,"item-text":"nombre","item-value":"id",rules:[e.rules.required],label:"Seleccione el Cargo"},model:{value:e.indexUser.cargo,callback:function(t){e.$set(e.indexUser,"cargo",t)},expression:"indexUser.cargo"}})],1),s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-select",{attrs:{items:e.list__unidades,"item-text":"siglas","item-value":"id",rules:[e.rules.required],label:"Seleccione la Unidad"},model:{value:e.indexUser.unidad,callback:function(t){e.$set(e.indexUser,"unidad",t)},expression:"indexUser.unidad"}})],1),e.show_change_pass?s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-checkbox",{staticClass:"py-0 my-0",staticStyle:{height:"20px!important"},attrs:{label:"Cambiar contraseña"},model:{value:e.chk_pass,callback:function(t){e.chk_pass=t},expression:"chk_pass"}})],1):e._e(),e.chk_pass?s("v-col",{staticClass:"pa-0 pr-2",attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{"append-icon":e.show_pass?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show_pass?"text":"password",name:"pass_input",label:"Contraseña",counter:""},on:{"click:append":function(t){e.show_pass=!e.show_pass}},model:{value:e.indexUser.pass,callback:function(t){e.$set(e.indexUser,"pass",t)},expression:"indexUser.pass"}})],1):e._e(),e.chk_pass?s("v-col",{staticClass:"pa-0 pl-2",attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{"append-icon":e.show_pass?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min,e.repeart_rule],type:e.show_pass?"text":"password",name:"pass_input",label:"Reperir Contraseña",counter:""},on:{"click:append":function(t){e.show_pass=!e.show_pass}},model:{value:e.indexUser.repeat_pass,callback:function(t){e.$set(e.indexUser,"repeat_pass",t)},expression:"indexUser.repeat_pass"}})],1):e._e()],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{outlined:"",enabled:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancelar")]),s("v-btn",{attrs:{color:"primary"},on:{click:e.submit}},[e._v("Guardar")])],1)],1)],1)],1)]},proxy:!0},{key:"item.unidad",fn:function(t){var s=t.item;return[e._v(e._s(s.unidad.siglas))]}},{key:"item.cargo",fn:function(t){var s=t.item;return[e._v(e._s(s.cargo.nombre))]}},{key:"item.rol",fn:function(t){var s=t.item;return[e._v(e._s(e.getRolName(s.rol)))]}},{key:"item.action",fn:function(t){var a=t.item;return[s("v-icon",{staticClass:"mr-4",on:{click:function(t){return e.editItem(a)}}},[e._v("mdi-pencil")]),s("v-icon",{attrs:{color:"error"},on:{click:function(t){return e.deleteItem(a)}}},[e._v("mdi-delete")])]}},{key:"no-data",fn:function(){return[s("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Actializar")])]},proxy:!0}])}),s("v-bottom-sheet",{model:{value:e.sheet,callback:function(t){e.sheet=t},expression:"sheet"}},[s("v-sheet",{staticClass:"text-center",attrs:{height:"200px"}},[s("v-btn",{staticClass:"ma-3 mt-6",attrs:{outlined:""},on:{click:function(t){e.sheet=!1}}},[e._v("Cancelar")]),s("v-btn",{staticClass:"ma-3 mt-6",attrs:{dark:"",color:"red"},on:{click:function(t){return e.removeItem()}}},[e._v("Confirmar")]),s("div",{staticClass:"py-3"},[e._v(" Seguro que desea eliminar el Usuario "),s("span",{staticStyle:{color:"red","font-weight":"600"}},[e._v(e._s(e.indexUser.user))]),e._v(" ? ")])],1)],1),s("v-snackbar",{attrs:{top:"",color:"success"},model:{value:e.notification,callback:function(t){e.notification=t},expression:"notification"}},[e._v(" "+e._s(e.notification_msg)+" "),s("v-icon",{attrs:{dark:""},on:{click:function(t){e.notification=!1}}},[e._v("mdi-close")])],1),s("v-overlay",{attrs:{value:!e.isLoadingUsers}},[s("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)},r=[],i=(s("7db0"),s("c975"),s("45fc"),s("b0c0"),s("a9e3"),s("25eb"),s("96cf"),s("1da1")),n=s("5530"),o=(s("b354"),s("ee8a")),l=s("2f62"),c={data:function(){return{dialog:!1,notification:!1,notification_msg:"",show_pass:!1,show_change_pass:!1,chk_pass:!1,sheet:!1,search:"",rol_list:[],editedIndex:-1,indexUser:{id:"",user:"",full_name:"",pass:"",cargo:"",unidad:"",rol:""},rules:{required:function(e){return!!e||"Obligatorio"},min:function(e){return e&&e.length>=8||"Minimo 8 characters"},user_string:function(e){return/^[A-Za-z0-9_]+$/.test(e)||"Solo debe contener (letras, números y _ )"}},headers:[{text:"ID",value:"id"},{text:"Usuario",value:"user"},{text:"Nombre Completo",value:"full_name"},{text:"Rol",value:"rol"},{text:"Cargo",value:"cargo"},{text:"Unidad",value:"unidad"},{text:"Acciones",value:"action",sortable:!1,width:100}]}},computed:Object(n["a"])({formTitle:function(){return-1===this.editedIndex?"Nuevo Usuario":"Editar datos del Usuario"},repeart_rule:function(){return this.indexUser.pass===this.indexUser.repeat_pass||"No cohinciden las contraseñas!"},form:function(){return{user:this.indexUser.user,full_name:this.indexUser.full_name,pass:this.indexUser.pass,repeat_pass:this.indexUser.repeat_pass,rol:this.indexUser.rol,unidad:this.indexUser.unidad,cargo:this.indexUser.cargo}}},Object(l["e"])("admin",{lista_usuarios:"list__users"}),{},Object(l["c"])("admin",{list__unidades:"orderUnidades",list__cargos:"orderCargos",isLoadingUsers:"isLoadingUsers"})),watch:{dialog:function(e){e||this.close()},lista_usuarios:function(e){var t=this;this.rules.user_exist=function(e){return-1===t.editedIndex?!t.lista_usuarios.some((function(t){return t.user===e}))||"el usuario ya está en uso!":!t.lista_usuarios.some((function(s){return s.user===e&&s.id!==t.indexUser.id}))||"el usuario ya está en uso!"}}},created:function(){this.initialize()},methods:Object(n["a"])({},Object(l["d"])("admin",["addListUsers","updateListUsers","deleteListUsers"]),{getRolName:function(e){return o["c"].find((function(t){return t.id==e})).name||"Rol sin nombre"},initialize:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.rol_list=o["c"];case 1:case"end":return t.stop()}}),t)})))()},close:function(){var e=this;this.$refs.form.reset(),setTimeout((function(){e.editedIndex=-1}),300)},submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=17;break}if(!(e.editedIndex>-1)){t.next=9;break}return t.next=4,e.axios.put("/userSystem/".concat(e.indexUser.id),Object(n["a"])({change_pass:e.chk_pass},e.form));case 4:s=t.sent,e.updateListUsers({id:e.indexUser.id,data:s.data}),e.notification_msg="usuario actualizado correctamente",t.next=14;break;case 9:return t.next=11,e.axios.post("/userSystem",e.form);case 11:a=t.sent,e.addListUsers(a.data),e.notification_msg="usuario ".concat(a.data.user," creado correctamente");case 14:e.notification=!0,e.$refs.form.reset(),e.dialog=!1;case 17:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.show_change_pass=!0,this.chk_pass=!1,this.editedIndex=this.lista_usuarios.indexOf(e),e.rol=Number.parseInt(e.rol),this.indexUser=Object.assign({},{id:e.id,user:e.user,full_name:e.full_name,rol:e.rol,unidad:e.unidad.id,cargo:e.cargo.id}),this.dialog=!0},openAddModal:function(){this.show_change_pass=!1,console.log(this.chk_pass,this.indexUser),this.chk_pass=!0,this.indexUser={}},deleteItem:function(e){this.sheet=!0,this.indexUser={id:e.id,user:e.user,full_name:e.full_name,rol:e.rol}},removeItem:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/userSystem/".concat(e.indexUser.id));case 2:s=t.sent,e.deleteListUsers(e.indexUser),e.notification_msg="El usuario ".concat(s.data.user," fue eliminado correctamente"),e.notification=!0,e.sheet=!1,e.editedIndex=-1;case 8:case"end":return t.stop()}}),t)})))()}})},u=c,d=s("2877"),m=Object(d["a"])(u,a,r,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-454b622f.71b6a6e6.js.map