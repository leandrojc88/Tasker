(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59f96eaa"],{c975:function(e,t,s){"use strict";var a=s("23e7"),i=s("4d64").indexOf,r=s("a640"),n=s("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,l=r("indexOf"),d=n("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:c||!l||!d},{indexOf:function(e){return c?o.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},cec7:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{fluid:""}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.lista_usuarios,search:e.search,"sort-by":"id"},scopedSlots:e._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:"",color:"white"}},[s("v-toolbar-title",{staticClass:"hidden-xs-only"},[e._v("Usuarios:")]),s("v-divider",{staticClass:"hidden-xs-only mx-4",attrs:{inset:"",vertical:""}}),s("v-text-field",{attrs:{"prepend-icon":"mdi-account-search-outline",label:"Buscar","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"500px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:e.openAddModal}},a),[s("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-account-plus-outline")]),s("span",{staticClass:"hidden-xs-only"},[e._v("Nuevo")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card",[s("v-card-title",{staticClass:"blue darken-4",staticStyle:{color:"white"}},[e._v(e._s(e.formTitle))]),s("v-card-text",{staticClass:"py-1"},[s("v-container",{staticClass:"py-1"},[s("v-form",{ref:"form",attrs:{"lazy-validation":""}},[s("v-row",[s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-text-field",{attrs:{required:"",rules:[e.rules.required,e.rules.user_string,e.rules.user_exist],label:"Usuario"},model:{value:e.indexUser.user,callback:function(t){e.$set(e.indexUser,"user",t)},expression:"indexUser.user"}})],1),s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-text-field",{attrs:{rules:[e.rules.required],label:"Nombre Completo"},model:{value:e.indexUser.full_name,callback:function(t){e.$set(e.indexUser,"full_name",t)},expression:"indexUser.full_name"}})],1),s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-select",{attrs:{items:e.rol_list,"item-text":"name","item-value":"id",rules:[e.rules.required],label:"Seleccione el Rol"},model:{value:e.indexUser.rol,callback:function(t){e.$set(e.indexUser,"rol",t)},expression:"indexUser.rol"}})],1),s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-select",{attrs:{items:e.list__cargos,"item-text":"nombre","item-value":"id",rules:[e.rules.required],label:"Seleccione el Cargo"},model:{value:e.indexUser.cargo,callback:function(t){e.$set(e.indexUser,"cargo",t)},expression:"indexUser.cargo"}})],1),s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-select",{attrs:{items:e.list__unidades,"item-text":"siglas","item-value":"id",rules:[e.rules.required],label:"Seleccione la Unidad"},model:{value:e.indexUser.unidad,callback:function(t){e.$set(e.indexUser,"unidad",t)},expression:"indexUser.unidad"}})],1),e.show_change_pass?s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[s("v-checkbox",{staticClass:"py-0 my-0",staticStyle:{height:"20px!important"},attrs:{label:"Cambiar contraseña"},model:{value:e.chk_pass,callback:function(t){e.chk_pass=t},expression:"chk_pass"}})],1):e._e(),e.chk_pass?s("v-col",{staticClass:"pa-0 pr-2",attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{"append-icon":e.show_pass?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show_pass?"text":"password",name:"pass_input",label:"Contraseña",counter:""},on:{"click:append":function(t){e.show_pass=!e.show_pass}},model:{value:e.indexUser.pass,callback:function(t){e.$set(e.indexUser,"pass",t)},expression:"indexUser.pass"}})],1):e._e(),e.chk_pass?s("v-col",{staticClass:"pa-0 pl-2",attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{"append-icon":e.show_pass?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min,e.repeart_rule],type:e.show_pass?"text":"password",name:"pass_input",label:"Reperir Contraseña",counter:""},on:{"click:append":function(t){e.show_pass=!e.show_pass}},model:{value:e.indexUser.repeat_pass,callback:function(t){e.$set(e.indexUser,"repeat_pass",t)},expression:"indexUser.repeat_pass"}})],1):e._e()],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{outlined:"",enabled:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancelar")]),s("v-btn",{attrs:{color:"primary"},on:{click:e.submit}},[e._v("Guardar")])],1)],1)],1)],1)]},proxy:!0},{key:"item.unidad",fn:function(t){var s=t.item;return[e._v(e._s(s.unidad.siglas))]}},{key:"item.cargo",fn:function(t){var s=t.item;return[e._v(e._s(s.cargo.nombre))]}},{key:"item.rol",fn:function(t){var s=t.item;return[e._v(e._s(e.getRolName(s.rol)))]}},{key:"item.action",fn:function(t){var a=t.item;return[s("v-icon",{staticClass:"mr-4",on:{click:function(t){return e.editItem(a)}}},[e._v("mdi-pencil")]),s("v-icon",{attrs:{color:"error"},on:{click:function(t){return e.deleteItem(a)}}},[e._v("mdi-delete")])]}},{key:"no-data",fn:function(){return[s("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Actializar")])]},proxy:!0}])}),s("v-bottom-sheet",{model:{value:e.sheet,callback:function(t){e.sheet=t},expression:"sheet"}},[s("v-sheet",{staticClass:"text-center",attrs:{height:"200px"}},[s("v-btn",{staticClass:"ma-3 mt-6",attrs:{outlined:""},on:{click:function(t){e.sheet=!1}}},[e._v("Cancelar")]),s("v-btn",{staticClass:"ma-3 mt-6",attrs:{dark:"",color:"red"},on:{click:function(t){return e.removeItem()}}},[e._v("Confirmar")]),s("div",{staticClass:"py-3"},[e._v(" Seguro que desea eliminar el Usuario "),s("span",{staticStyle:{color:"red","font-weight":"600"}},[e._v(e._s(e.indexUser.user))]),e._v(" ? ")])],1)],1),s("v-snackbar",{attrs:{top:"",color:"success"},model:{value:e.notification,callback:function(t){e.notification=t},expression:"notification"}},[e._v(" "+e._s(e.notification_msg)+" "),s("v-icon",{attrs:{dark:""},on:{click:function(t){e.notification=!1}}},[e._v("mdi-close")])],1),s("v-overlay",{attrs:{value:!e.isLoadingUsers}},[s("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)},i=[],r=(s("7db0"),s("c975"),s("45fc"),s("b0c0"),s("a9e3"),s("25eb"),s("96cf"),s("1da1")),n=s("5530"),o=(s("b354"),s("ee8a")),c=s("2f62"),l={data:function(){return{dialog:!1,notification:!1,notification_msg:"",show_pass:!1,show_change_pass:!1,chk_pass:!1,sheet:!1,search:"",rol_list:[],editedIndex:-1,indexUser:{id:"",user:"",full_name:"",pass:"",cargo:"",unidad:"",rol:""},rules:{required:function(e){return!!e||"Obligatorio"},min:function(e){return e&&e.length>=8||"Minimo 8 characters"},user_string:function(e){return/^[A-Za-z0-9_]+$/.test(e)||"Solo debe contener (letras, números y _ )"}},headers:[{text:"ID",value:"id"},{text:"Usuario",value:"user"},{text:"Nombre Completo",value:"full_name"},{text:"Rol",value:"rol"},{text:"Cargo",value:"cargo"},{text:"Unidad",value:"unidad"},{text:"Acciones",value:"action",sortable:!1,width:100}]}},computed:Object(n["a"])({formTitle:function(){return-1===this.editedIndex?"Nuevo Usuario":"Editar datos del Usuario"},repeart_rule:function(){return this.indexUser.pass===this.indexUser.repeat_pass||"No cohinciden las contraseñas!"},form:function(){return{user:this.indexUser.user,full_name:this.indexUser.full_name,pass:this.indexUser.pass,repeat_pass:this.indexUser.repeat_pass,rol:this.indexUser.rol,unidad:this.indexUser.unidad,cargo:this.indexUser.cargo}}},Object(c["e"])("admin",{lista_usuarios:"list__users"}),{},Object(c["c"])("admin",{list__unidades:"orderUnidades",list__cargos:"orderCargos",isLoadingUsers:"isLoadingUsers"})),watch:{dialog:function(e){e||this.close()},lista_usuarios:function(e){var t=this;this.rules.user_exist=function(e){return-1===t.editedIndex?!t.lista_usuarios.some((function(t){return t.user===e}))||"el usuario ya está en uso!":!t.lista_usuarios.some((function(s){return s.user===e&&s.id!==t.indexUser.id}))||"el usuario ya está en uso!"}}},created:function(){this.initialize()},methods:Object(n["a"])({},Object(c["d"])("admin",["addListUsers","updateListUsers","deleteListUsers"]),{getRolName:function(e){return o["c"].find((function(t){return t.id==e})).name||"Rol sin nombre"},initialize:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.rol_list=o["c"];case 1:case"end":return t.stop()}}),t)})))()},close:function(){var e=this;this.$refs.form.reset(),setTimeout((function(){e.editedIndex=-1}),300)},submit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=17;break}if(!(e.editedIndex>-1)){t.next=9;break}return t.next=4,e.axios.put("/userSystem/".concat(e.indexUser.id),Object(n["a"])({change_pass:e.chk_pass},e.form));case 4:s=t.sent,e.updateListUsers({id:e.indexUser.id,data:s.data}),e.notification_msg="usuario actualizado correctamente",t.next=14;break;case 9:return t.next=11,e.axios.post("/userSystem",e.form);case 11:a=t.sent,e.addListUsers(a.data),e.notification_msg="usuario ".concat(a.data.user," creado correctamente");case 14:e.notification=!0,e.$refs.form.reset(),e.dialog=!1;case 17:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.show_change_pass=!0,this.chk_pass=!1,this.editedIndex=this.lista_usuarios.indexOf(e),e.rol=Number.parseInt(e.rol),this.indexUser=Object.assign({},{id:e.id,user:e.user,full_name:e.full_name,rol:e.rol,unidad:e.unidad.id,cargo:e.cargo.id}),this.dialog=!0},openAddModal:function(){this.show_change_pass=!1,console.log(this.chk_pass,this.indexUser),this.chk_pass=!0,this.indexUser={}},deleteItem:function(e){this.sheet=!0,this.indexUser={id:e.id,user:e.user,full_name:e.full_name,rol:e.rol}},removeItem:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/userSystem/".concat(e.indexUser.id));case 2:s=t.sent,e.deleteListUsers(e.indexUser),e.notification_msg="El usuario ".concat(s.data.user," fue eliminado correctamente"),e.notification=!0,e.sheet=!1,e.editedIndex=-1;case 8:case"end":return t.stop()}}),t)})))()}})},d=l,u=s("2877"),m=Object(u["a"])(d,a,i,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-59f96eaa.06782b53.js.map