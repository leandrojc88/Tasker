!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@casl/ability")):"function"==typeof define&&define.amd?define(["exports","@casl/ability"],t):t(((e=e||self).casl=e.casl||{},e.casl.vue={}),e.casl)}(this,function(e,n){"use strict";var t={name:"Can",functional:!0,props:{I:String,do:String,a:[String,Function],of:[String,Function,Object],this:[String,Function,Object],on:[String,Function,Object],not:Boolean,passThrough:Boolean},render:function(e,t){var n=t.props,i=t.children,o=t.parent,r=t.data,a=(n.I||n.do||"").split(" "),l=a[0],s=a[1],u=n.of||n.a||n.this||n.on;if(!l)throw new Error("[Vue Can]: neither `I` nor `do` property exist");if(!u)throw new Error("[Vue Can]: neither `of` nor `a` nor `this` nor `on` property exist");var c=!!(n.not^o.$can(l,u,s));if(!n.passThrough)return c?i:null;if(!r.scopedSlots||!r.scopedSlots.default)throw new Error("[Vue Can]: `passThrough` expects default scoped slot to be specified");return r.scopedSlots.default({allowed:c,ability:o.$ability})}},r="undefined"==typeof Symbol?"__w"+Date.now():Symbol("vue.watcher");e.Can=t,e.abilitiesPlugin=function(o,e){var t=e||new n.Ability([]);Object.defineProperty(o.prototype,"$ability",{writable:!0,value:t}),o.mixin({beforeCreate:function(){var e=this.$options,t=e.ability,n=e.parent;t?this.$ability=t:n&&n.$ability&&(this.$ability=n.$ability)},methods:{$can:function(){var e,t,n=this.$ability,i=n[r]?n[r]:(e=n,t=new o({data:{rules:[]}}),e.on("updated",function(e){t.rules=e.rules}),e[r]=t);return i.rules=i.rules,n.can.apply(n,arguments)}}})},Object.defineProperty(e,"__esModule",{value:!0})});
